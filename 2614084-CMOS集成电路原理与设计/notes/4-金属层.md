# 4 金属层

CMOS集成电路中的金属层用来连接不同的电路元件（MOS管、电容和电阻）
CMOS工艺中采用的金属为铝或铜

---

现代VLSI基本采用铜互连线而非铝互连线，为什么？

铜的电阻率比铝小，Cu:1.7微欧姆/厘米；Al：3微欧姆/厘米，在相同的线长下，铜互联的寄生电阻小，在相同的输运电流下，铜线可以更细，寄生电容更小。 因此铜互联线的延迟小（RC），适合高速应用；铜互连的串扰小（耦合小）
铜的抗电迁移率比铝小，其电迁移阀值电流为铝的10倍，相同线宽能承受更大的电流。

## 4.1 连接焊盘

连接焊盘是管芯与封装管壳之间的连接界面。金属线的一端键合到连接焊盘上，另一端接到引线架。如图所示

在量产的芯片中，焊盘的尺寸可能各不相等（如75×100、50×75等），这取决于制造商的设计规则。**焊盘的尺寸是版图设计中唯一不随工艺尺寸的缩小而按比例缩小的单元。**
图中是一个用metal2实现的连接焊盘版图，metal2的上层和下层都是绝缘层（一般为SiO2）

管芯的最顶端的绝缘层又被称为钝化层。钝化层可以保护芯片，防止沾污。连接焊盘的开口被称为钝化层的切口。为了在覆盖metal2的玻璃（绝缘层上）定义切口，采用了overglass(OVGL)层。如下图

### 金属到衬底的电容

上图中metal2（连接焊盘）到衬底（等电位的平面）之间构成了寄生电容。为了在芯片外得到电路的输出信号，必须驱动金属到衬底的电容。
由于电容器边缘对下极板 的临近效应，产生了边缘（周边）电容。
连接焊盘相关的寄生电容值是平板电容Cplate和边缘电容Cfringe的总和。Cpad,m2-sub=面积*Cplate+周长*Cfringe

### CMOS工艺中寄生电容的典型值

JPG

### 连接焊盘注意事项

在绝大多数现代的CMOS工艺中，会采用超过2层的金属。**顶层金属**（如5层金属工艺中的第5层，即metal5）就是焊线要连接的层

### 用金属层进行设计和版图绘制

Via（过孔）连接金属层。它的位置定义了在绝缘体开口处制作一个如钨的“接插点”。

## 4.2 金属层相关的寄生器件

试估算一个长为1mm,宽为200nm的金属1的电阻值，其中方块电阻为0.1欧姆/方块，比例因子为50nm。将此金属线看作RC传输线，试估算通过该金属线的延迟时间。

解：
L/W=1mm/200nm=5000方
R=0.1欧姆/方×5000=500欧姆
C=1000×0.2×23aF+2000.4×79aF=162fF
Csquare=162fF/5000=32aF/方
td = 0.35RsquareCsquareL2 = 0.35×0.1×32×50002 = 28ps

---

本征传输延迟

将上例中的结果（28ps/mm的金属延迟时间）与信号在相对介电常数为4的SiO2相比较：

重要结论：对于任何实际的体CMOS集成电路中的连线，**寄生器件（RC延迟时间）决定了传输延迟时间**。

---

试估算一个10×10方块的metal1和同样大小的metal2之间的电容，其中metal2恰好放置在metal1的正上方，比例因子为50nm。当metal2的电位从0变化到1V，计算metal1上的电压变化。

由前表可知，metal1 和 metal2 之间的平板电容的典型值为 35aF/um2,边缘电容的典型值为 100aF/um2，则

$$
C_{12} = 100 \times (0.05)^2 * 35 + 40 \times 0.05 \times 100 = 209 aF
$$

而 metal1 到衬底的电容值为

$$
C_{1sub} = 100 \times (0.05)^2 \times 23 + 40 \times 0.05 \times 79 = 164 aF
$$

则 $C_{1sub}$ 上的电压为

$$
\Delta V_{metal1} = \Delta V_{metal2} \times \frac{\frac{1}{j w C_{1 sub}}}{\frac{1}{j w C_{1 sub}} + \frac{1}{j w C_{12}}} \\
= 2 \times \frac{C_{12}}{C_{1sub} + C_{12}} = \frac{209}{209 + 164} = 0.56 V
$$

## 4.3 电流运载极限

直流电流通过导体时，金属中产生的质量输运现象称为**金属化电迁移**，即金属中的离子迁移。
所谓金属电迁移失效，通常是指金属层因金属离子的迁移在局部区域由质量堆积而出现小丘，或由质量亏损出现空洞而造成的器件或互连性能退化或失效。通常在高温、强电场下引起。
不同的金属产生电迁移的条件是不同的。如果电流密度能够保持低于金属迁移阈值电流密度J，电迁移就不会发生。通常，对于Al而言， $J_{\text{Al}}$ 典型值为：1～2mA/um。

假设比例因子为50nm,铝金属的迁移阈值电流密度 $J_{\text{Al}} = 1mA/um$。试计算宽为3的metal所能运载的最大电流。如果导线长为1cm，方块电阻为0.1欧姆，试计算该导线上的压降。
解：

$I_{MAX}=JAl*W=10-3*0.15=150uA$

$Vdrop=0.1欧/方×10000/0.15×150uA=1V$

上例中压降比较大，如果该导线用做电源线，应该大大增加其宽度以降低压降，不过如果用做数据线，这个宽度或许足够。
通常，使用更高层的金属作为电源线。如metal2的厚度大约是metal1的两倍，电阻更小。在布电源线时，一般来说使用的金属越多，出现问题的几率越小。如果条件允许，应该把电源线和地线遍布整个芯片，这样电源线与地线之间的电容越大，电源线上的电压改变就越困难，即直流电压比较稳定。

---

如图所示，金属层的设计规则
注意metal1和metal2之间的间距没有设计规则的限制，这是因为这两层之间有绝缘层

---

CMOS工艺中其他任意层与金属的接触都会形成相应的接触电阻。

### 接触电阻

如上图，如果穿（通）孔接触电阻为10欧姆，当有1mA电流流过时流过a图的通孔会得到10mV的压降，并且由于存在电迁移效应，单个穿孔的稳定性很差。图b中4个穿孔有效接触电阻为2.5欧姆（并行），因而当导线流过1mA电流时，通孔上的压降减小到2.5mV.**增加金属的覆盖面积和通孔的个数能减小压降和电迁移效应**。

## 4.4 串扰

串扰（crosstalk）是两条信号线之间的耦合，信号线之间的互感（mutual inductance）和互容（mutual capacitance）引起信号馈通 。
串扰分两种：容性耦合和感性耦合

## 4.5 地电位上跳

直流问题

使实际提供的VDD和地的电压靠近理想值的办法就是提高为电路提供和返回电流的导线宽度以减小串联电阻。

---

交流问题

通常在CMOS电路设计中，其静态电流为0，但是偶尔在短时间也需要小的电流，这就会造成地电位上跳和VDD下降。为了解决这个问题，可以考虑在VDD和地之间加入一个片内去耦电容（如上图虚线所示）。加入的电容可以在瞬间提供必要的充电电荷。使得电路提供的电压保持在VDD。在片外也同样需要采用去耦电容放置于芯片的VDD和地管脚之间。

假设上图(b)中需要一个10ns长的50uA的电流。如果要求在10ns内电路的压降变化不超过10mV,试计算所需的去耦电容。
欲驱动一个片外负载，通常会在片内的逻辑电路和片外负载之间放置一个输出缓冲，如图所示。如果VDD为1V，并且要求在1ns时间内将下图中的30pF片外负载驱动至900mV,试计算所需去耦电容的大小。假设不考虑地电位变化的问题。

解答见PPT P29
