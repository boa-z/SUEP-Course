ORG 00H

MOV P0,#00H
MOV P1,#00H
MOV P2,#00H
MOV P3,#0FFH

WAIT: JNB P3.3,WAIT
ACALL DELAY
JNB P3.3,WAIT

MAIN: 
    // SETB  P2.2
    MOV R0,#01H
    MOV R1,#08H

LOOP: MOV A,R0
      MOV P0,A
      ACALL DELAY
      MOV A,R0
      RL A
      MOV R0,A
      DJNZ R1,LOOP

      SJMP MAIN

DELAY: MOV R2,#0FFH

NEXT: DJNZ R2,NEXT
      RET

END